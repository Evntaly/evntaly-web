(()=>{let t=window.evsq=window.evsq||[],i=(window.evntaly=window.evntaly||function(...e){t.push(e)},{token:null,project:null,trackingEnabled:!0}),r="2.0.6",s="https://app.evntaly.com/prod/api/v1",a=!1,l=!1,c=null,d=null,e=null,n=null;function u(){return e=e||(()=>{try{var e=sessionStorage.getItem("evntaly_session_id");if(e)return e}catch(e){console.warn("Evntaly: sessionStorage not available, using temporary session ID")}e=`evs_${Date.now().toString(36)}_`+Math.random().toString(36).substring(2,8);try{sessionStorage.setItem("evntaly_session_id",e)}catch(e){console.warn("Evntaly: Could not store session ID in sessionStorage")}return e})()}function w(){return n=n||(()=>{try{var e=localStorage.getItem("evntaly_user_id");if(e)return e}catch(e){console.warn("Evntaly: localStorage not available, using temporary user ID")}e=`evu_${Date.now().toString(36)}_${Math.random().toString(36).substring(2,10)}_`+Math.random().toString(36).substring(2,6);try{localStorage.setItem("evntaly_user_id",e)}catch(e){console.warn("Evntaly: Could not store user ID in localStorage")}return e})()}function v(e){var n,o,t=(i=e)?(i=i.toLowerCase()).includes("iphone")||i.includes("ipod")?(n=i.match(/cpu iphone os (\d+)[_.](\d+)[_.]?(\d+)?/))?{os:"iOS",version:n[1]+"."+n[2]+(n[3]?"."+n[3]:"")}:{os:"iOS",version:"Unknown"}:i.includes("ipad")?(n=i.match(/cpu os (\d+)[_.](\d+)[_.]?(\d+)?/))?{os:"iOS",version:n[1]+"."+n[2]+(n[3]?"."+n[3]:"")}:{os:"iOS",version:"Unknown"}:i.includes("android")?(n=i.match(/android (\d+(?:\.\d+)*)/))?{os:"Android",version:n[1]}:{os:"Android",version:"Unknown"}:i.includes("windows nt 10.0")?{os:"Windows",version:"10/11"}:i.includes("windows nt 6.3")?{os:"Windows",version:"8.1"}:i.includes("windows nt 6.2")?{os:"Windows",version:"8"}:i.includes("windows nt 6.1")?{os:"Windows",version:"7"}:i.includes("windows nt 6.0")?{os:"Windows",version:"Vista"}:i.includes("windows nt 5.1")||i.includes("windows xp")?{os:"Windows",version:"XP"}:i.includes("windows")?{os:"Windows",version:"Unknown"}:(n=i.match(/mac os x (\d+)[_.](\d+)[_.]?(\d+)?/))?(n=(t=parseInt(n[1]))+"."+(o=parseInt(n[2]))+((n=n[3]?parseInt(n[3]):0)?"."+n:""),10===t?15<=o?{os:"macOS",version:n+" (Catalina)"}:14===o?{os:"macOS",version:n+" (Mojave)"}:13===o?{os:"macOS",version:n+" (High Sierra)"}:12===o?{os:"macOS",version:n+" (Sierra)"}:{os:"macOS",version:n}:11===t?{os:"macOS",version:n+" (Big Sur)"}:12===t?{os:"macOS",version:n+" (Monterey)"}:13===t?{os:"macOS",version:n+" (Ventura)"}:14===t?{os:"macOS",version:n+" (Sonoma)"}:15===t?{os:"macOS",version:n+" (Sequoia)"}:{os:"macOS",version:n}):i.includes("mac os x")||i.includes("macos")?{os:"macOS",version:"Unknown"}:i.includes("ubuntu")?{os:"Ubuntu",version:(o=i.match(/ubuntu[\/\s](\d+(?:\.\d+)*)/))?o[1]:"Unknown"}:i.includes("debian")?{os:"Debian",version:"Unknown"}:i.includes("fedora")?{os:"Fedora",version:(t=i.match(/fedora[\/\s](\d+)/))?t[1]:"Unknown"}:i.includes("centos")?{os:"CentOS",version:(n=i.match(/centos[\/\s](\d+(?:\.\d+)*)/))?n[1]:"Unknown"}:i.includes("red hat")?{os:"Red Hat",version:"Unknown"}:i.includes("linux")?{os:"Linux",version:"Unknown"}:i.includes("freebsd")?{os:"FreeBSD",version:(o=i.match(/freebsd[\/\s](\d+(?:\.\d+)*)/))?o[1]:"Unknown"}:i.includes("openbsd")?{os:"OpenBSD",version:"Unknown"}:i.includes("netbsd")?{os:"NetBSD",version:"Unknown"}:i.includes("sunos")?{os:"Solaris",version:"Unknown"}:{os:"Unknown",version:"Unknown"}:{os:"Unknown",version:"Unknown"},i=(n=e)?!(o=(n=n.toLowerCase()).match(/chrome\/(\d+(?:\.\d+)*)/))||n.includes("edg")||n.includes("opr")?(i=n.match(/edg\/(\d+(?:\.\d+)*)/))?{browser:"Edge",version:i[1]}:(i=n.match(/opr\/(\d+(?:\.\d+)*)/))?{browser:"Opera",version:i[1]}:(i=n.match(/opera[\/\s](\d+(?:\.\d+)*)/))?{browser:"Opera",version:i[1]}:(i=n.match(/firefox\/(\d+(?:\.\d+)*)/))?{browser:"Firefox",version:i[1]}:(i=n.match(/version\/(\d+(?:\.\d+)*)/))&&n.includes("safari")&&!n.includes("chrome")?{browser:"Safari",version:i[1]}:(i=n.match(/(?:msie\s|trident.+?rv:)(\d+(?:\.\d+)*)/))?{browser:"Internet Explorer",version:i[1]}:(i=n.match(/samsungbrowser\/(\d+(?:\.\d+)*)/))?{browser:"Samsung Internet",version:i[1]}:(i=n.match(/ucbrowser\/(\d+(?:\.\d+)*)/))?{browser:"UC Browser",version:i[1]}:n.includes("brave")?{browser:"Brave",version:"Unknown"}:(i=n.match(/vivaldi\/(\d+(?:\.\d+)*)/))?{browser:"Vivaldi",version:i[1]}:(i=n.match(/yabrowser\/(\d+(?:\.\d+)*)/))?{browser:"Yandex Browser",version:i[1]}:n.includes("crios")?{browser:"Chrome iOS",version:(i=n.match(/crios\/(\d+(?:\.\d+)*)/))?i[1]:"Unknown"}:n.includes("fxios")?{browser:"Firefox iOS",version:(i=n.match(/fxios\/(\d+(?:\.\d+)*)/))?i[1]:"Unknown"}:n.includes("mobile")&&n.includes("safari")?{browser:"Mobile Safari",version:(i=n.match(/version\/(\d+(?:\.\d+)*)/))?i[1]:"Unknown"}:n.includes("webkit")?{browser:"WebKit",version:"Unknown"}:n.includes("gecko")?{browser:"Gecko",version:"Unknown"}:{browser:"Unknown",version:"Unknown"}:{browser:"Chrome",version:o[1]}:{browser:"Unknown",version:"Unknown"},e=(e=e)?(e=e.toLowerCase()).includes("playstation")||e.includes("xbox")||e.includes("nintendo")?"Gaming Console":e.includes("smart-tv")||e.includes("smarttv")||e.includes("webos")||e.includes("tizen")||e.includes("roku")||e.includes("appletv")||e.includes("googletv")||e.includes("android tv")?"Smart TV":e.includes("watch")||e.includes("wearable")||e.includes("fitbit")||e.includes("gear s")?"Wearable":e.includes("ipad")||e.includes("android")&&(e.includes("tablet")||!e.includes("mobile")||e.includes("nexus 7")||e.includes("nexus 9")||e.includes("nexus 10"))||e.includes("windows")&&e.includes("touch")&&!e.includes("phone")||e.includes("kindle")&&!e.includes("mobile")?"Tablet":e.includes("mobile")||e.includes("iphone")||e.includes("ipod")||e.includes("blackberry")||e.includes("windows phone")||e.includes("palm")||e.includes("symbian")||e.includes("nokia")||e.includes("fennec")||e.includes("opera mini")||e.includes("opera mobi")||e.includes("android")&&e.includes("mobile")?"Mobile":e.includes("windows")||e.includes("macintosh")||e.includes("mac os x")||e.includes("linux")||e.includes("ubuntu")||e.includes("debian")||e.includes("fedora")||e.includes("centos")||e.includes("freebsd")||e.includes("openbsd")?"Desktop":e.includes("bot")||e.includes("crawler")||e.includes("spider")||e.includes("scraper")||e.includes("curl")||e.includes("wget")?"Bot":"Unknown":"Unknown";return{os:t.os,osVersion:t.version,browser:i.browser,browserVersion:i.version,deviceType:e}}function g(){return navigator.connection&&"string"==typeof navigator.connection.effectiveType?navigator.connection.effectiveType:null}function m(e){e=e.target.closest("button[data-event]");if(e){var{os:n,browser:t}=v(navigator.userAgent);let o={event:e.getAttribute("data-event"),userId:e.getAttribute("data-user-id")||w(),channel:e.getAttribute("data-channel")||"events",icon:e.getAttribute("data-icon")||null,data:{url:window.location.pathname,referrer:document.referrer,utm:{source:new URLSearchParams(window.location.search).get("utm_source")||null,medium:new URLSearchParams(window.location.search).get("utm_medium")||null,campaign:new URLSearchParams(window.location.search).get("utm_campaign")||null,term:new URLSearchParams(window.location.search).get("utm_term")||null},userAgent:navigator.userAgent,platform:navigator.userAgentData&&navigator.userAgentData.platform||null,appVersion:navigator.appVersion,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,networkConnectionType:g()},tags:[],context:{sdkVersion:r,sdkRuntime:"browser",operatingSystem:n,browser:t},topic:e.getAttribute("data-topic")||"@auto-generated-event"};[...e.attributes].forEach(e=>{var n;e.name.startsWith("data-tag-")&&(n=e.name.replace("data-tag-",""),o.tags.push(n+":"+e.value))}),[...e.attributes].forEach(e=>{var n;e.name.startsWith("data-payload-")&&(n=e.name.replace("data-payload-",""),o.data[n]=e.value)}),window.evntaly("track",o)}}function p(){var e,n;i.trackingEnabled&&({os:n,browser:e}=v(navigator.userAgent),n={event:"Page Viewed",userId:w(),topic:"@navigation",data:{url:window.location.pathname,referrer:document.referrer,utm:{source:new URLSearchParams(window.location.search).get("utm_source")||null,medium:new URLSearchParams(window.location.search).get("utm_medium")||null,campaign:new URLSearchParams(window.location.search).get("utm_campaign")||null,term:new URLSearchParams(window.location.search).get("utm_term")||null},userAgent:navigator.userAgent,platform:navigator.userAgentData&&navigator.userAgentData.platform||null,appVersion:navigator.appVersion,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,networkConnectionType:g()},type:"Page View",icon:"ü§ì",context:{sdkVersion:r,sdkRuntime:"browser",operatingSystem:n,browser:e}},window.evntaly("track",n))}"complete"===document.readyState||"interactive"===document.readyState?l=!0:window.addEventListener("load",function(){l=!0}),setInterval(function(){for(;0<t.length;){var[e,...n]=t.shift();if("init"===e&&(o=[...n][0],o&&"object"==typeof o?(i.token=o.token,i.project=o.clientID,i.disableAutoPageViewTracking=!1===o.trackScreenViews,i.trackingEnabled=!1!==o.trackingEnabled):console.error("Evntaly: Configuration must be an object with { clientID, token, trackScreenViews, trackingEnabled } properties"),!a)){if(document.addEventListener("click",m),!i.disableAutoPageViewTracking){if(window.history.pushState){let n=window.history.pushState;window.history.pushState=function(...e){n.apply(this,e),i.disableAutoPageViewTracking||p()}}window.addEventListener("popstate",function(){i.disableAutoPageViewTracking||p()}),window.addEventListener("load",function(){i.disableAutoPageViewTracking||p()}),l&&(console.log("Initial page view triggered manually"),setTimeout(p,0))}a=!0}"track"===e&&(async e=>{var n;i.trackingEnabled?i.token?(n=await(async()=>{var{os:e,osVersion:n,browser:o,browserVersion:t,deviceType:i}=v(navigator.userAgent),r=await(async()=>c||(d=d||(async()=>{try{var e,n=await fetch("https://ipapi.co/json/",{method:"GET",headers:{Accept:"application/json"}});if(n.ok)return e=await n.json(),c={country:e.country_name||null,countryCode:e.country_code||null,region:e.region||null,city:e.city||null,timezone:e.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone||null,latitude:e.latitude||null,longitude:e.longitude||null};throw new Error("Failed to fetch location data")}catch(e){return console.warn("Evntaly: Failed to fetch location data:",e.message),c={country:null,countryCode:null,region:null,city:null,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||null,latitude:null,longitude:null}}})()))();return{userAgent:navigator.userAgent||null,referer:document.referrer||null,method:"GET",url:window.location.pathname||null,host:window.location.host||null,origin:window.location.origin||null,acceptLanguage:navigator.language||null,acceptEncoding:null,contentType:"text/html",xForwardedProto:window.location.protocol?.replace(":","")||null,xForwardedHost:null,xRequestedWith:"XMLHttpRequest",authorization:null,cfIpCountry:null,cfRay:null,os:e,osVersion:n,browser:o,browserVersion:t,deviceType:i,location:r}})(),fetch(s+"/register/event",{method:"POST",headers:{"Content-Type":"application/json",secret:i.token,pat:i.project},body:JSON.stringify({title:e.event,description:"User interaction",message:"Automatically tracked event.",data:e.data||{},user:{id:e.userId||w()},icon:e.icon||"‚ÑπÔ∏è",apply_rule_only:!0,notify:!0,type:e.type||"Event",sessionID:e.sessionID||u(),feature:e.channel||"events",topic:e.topic||"@auto-generated event",tags:e.tags||[],context:{sdkVersion:r,sdkRuntime:"browser",sdkSource:"evntaly-web"},requestContext:n})})):console.error("Evntaly: Missing API token. Call window.evntaly('Init', 'TOKEN', 'PROJECT_NAME') first."):console.warn("üö´ Tracking is disabled. Event not sent.")})(...n),"identifyUser"===e&&(o=[...n][0],i.token?fetch(s+"/register/user",{method:"POST",headers:{"Content-Type":"application/json",secret:i.token,pat:i.project},body:JSON.stringify(o)}):console.error("Evntaly: Missing API token. Call window.evntaly('setConfig', 'TOKEN', 'PROJECT_NAME') first.")),"disableTracking"===e&&(i.trackingEnabled=!1,console.log("üö´ Event tracking disabled.")),"enableTracking"===e&&(i.trackingEnabled=!0,console.log("‚úÖ Event tracking enabled."))}var o},100)})();