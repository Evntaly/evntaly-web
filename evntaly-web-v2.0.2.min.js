(()=>{let s=window.evsq=window.evsq||[],r=(window.evntaly=window.evntaly||function(...e){s.push(e)},{token:null,project:null,trackingEnabled:!0}),a="1.0.10",d="https://app.evntaly.com/prod/api/v1",l=!1,c=!1,u=null,w=null;function v(e){var n,o,i=(t=e)?(t=t.toLowerCase()).includes("iphone")||t.includes("ipod")?(n=t.match(/cpu iphone os (\d+)[_.](\d+)[_.]?(\d+)?/))?{os:"iOS",version:n[1]+"."+n[2]+(n[3]?"."+n[3]:"")}:{os:"iOS",version:"Unknown"}:t.includes("ipad")?(n=t.match(/cpu os (\d+)[_.](\d+)[_.]?(\d+)?/))?{os:"iOS",version:n[1]+"."+n[2]+(n[3]?"."+n[3]:"")}:{os:"iOS",version:"Unknown"}:t.includes("android")?(n=t.match(/android (\d+(?:\.\d+)*)/))?{os:"Android",version:n[1]}:{os:"Android",version:"Unknown"}:t.includes("windows nt 10.0")?{os:"Windows",version:"10/11"}:t.includes("windows nt 6.3")?{os:"Windows",version:"8.1"}:t.includes("windows nt 6.2")?{os:"Windows",version:"8"}:t.includes("windows nt 6.1")?{os:"Windows",version:"7"}:t.includes("windows nt 6.0")?{os:"Windows",version:"Vista"}:t.includes("windows nt 5.1")||t.includes("windows xp")?{os:"Windows",version:"XP"}:t.includes("windows")?{os:"Windows",version:"Unknown"}:(n=t.match(/mac os x (\d+)[_.](\d+)[_.]?(\d+)?/))?(n=(i=parseInt(n[1]))+"."+(o=parseInt(n[2]))+((n=n[3]?parseInt(n[3]):0)?"."+n:""),10===i?15<=o?{os:"macOS",version:n+" (Catalina)"}:14===o?{os:"macOS",version:n+" (Mojave)"}:13===o?{os:"macOS",version:n+" (High Sierra)"}:12===o?{os:"macOS",version:n+" (Sierra)"}:{os:"macOS",version:n}:11===i?{os:"macOS",version:n+" (Big Sur)"}:12===i?{os:"macOS",version:n+" (Monterey)"}:13===i?{os:"macOS",version:n+" (Ventura)"}:14===i?{os:"macOS",version:n+" (Sonoma)"}:15===i?{os:"macOS",version:n+" (Sequoia)"}:{os:"macOS",version:n}):t.includes("mac os x")||t.includes("macos")?{os:"macOS",version:"Unknown"}:t.includes("ubuntu")?{os:"Ubuntu",version:(o=t.match(/ubuntu[\/\s](\d+(?:\.\d+)*)/))?o[1]:"Unknown"}:t.includes("debian")?{os:"Debian",version:"Unknown"}:t.includes("fedora")?{os:"Fedora",version:(i=t.match(/fedora[\/\s](\d+)/))?i[1]:"Unknown"}:t.includes("centos")?{os:"CentOS",version:(n=t.match(/centos[\/\s](\d+(?:\.\d+)*)/))?n[1]:"Unknown"}:t.includes("red hat")?{os:"Red Hat",version:"Unknown"}:t.includes("linux")?{os:"Linux",version:"Unknown"}:t.includes("freebsd")?{os:"FreeBSD",version:(o=t.match(/freebsd[\/\s](\d+(?:\.\d+)*)/))?o[1]:"Unknown"}:t.includes("openbsd")?{os:"OpenBSD",version:"Unknown"}:t.includes("netbsd")?{os:"NetBSD",version:"Unknown"}:t.includes("sunos")?{os:"Solaris",version:"Unknown"}:{os:"Unknown",version:"Unknown"}:{os:"Unknown",version:"Unknown"},t=(n=e)?!(o=(n=n.toLowerCase()).match(/chrome\/(\d+(?:\.\d+)*)/))||n.includes("edg")||n.includes("opr")?(t=n.match(/edg\/(\d+(?:\.\d+)*)/))?{browser:"Edge",version:t[1]}:(t=n.match(/opr\/(\d+(?:\.\d+)*)/))?{browser:"Opera",version:t[1]}:(t=n.match(/opera[\/\s](\d+(?:\.\d+)*)/))?{browser:"Opera",version:t[1]}:(t=n.match(/firefox\/(\d+(?:\.\d+)*)/))?{browser:"Firefox",version:t[1]}:(t=n.match(/version\/(\d+(?:\.\d+)*)/))&&n.includes("safari")&&!n.includes("chrome")?{browser:"Safari",version:t[1]}:(t=n.match(/(?:msie\s|trident.+?rv:)(\d+(?:\.\d+)*)/))?{browser:"Internet Explorer",version:t[1]}:(t=n.match(/samsungbrowser\/(\d+(?:\.\d+)*)/))?{browser:"Samsung Internet",version:t[1]}:(t=n.match(/ucbrowser\/(\d+(?:\.\d+)*)/))?{browser:"UC Browser",version:t[1]}:n.includes("brave")?{browser:"Brave",version:"Unknown"}:(t=n.match(/vivaldi\/(\d+(?:\.\d+)*)/))?{browser:"Vivaldi",version:t[1]}:(t=n.match(/yabrowser\/(\d+(?:\.\d+)*)/))?{browser:"Yandex Browser",version:t[1]}:n.includes("crios")?{browser:"Chrome iOS",version:(t=n.match(/crios\/(\d+(?:\.\d+)*)/))?t[1]:"Unknown"}:n.includes("fxios")?{browser:"Firefox iOS",version:(t=n.match(/fxios\/(\d+(?:\.\d+)*)/))?t[1]:"Unknown"}:n.includes("mobile")&&n.includes("safari")?{browser:"Mobile Safari",version:(t=n.match(/version\/(\d+(?:\.\d+)*)/))?t[1]:"Unknown"}:n.includes("webkit")?{browser:"WebKit",version:"Unknown"}:n.includes("gecko")?{browser:"Gecko",version:"Unknown"}:{browser:"Unknown",version:"Unknown"}:{browser:"Chrome",version:o[1]}:{browser:"Unknown",version:"Unknown"},e=(e=e)?(e=e.toLowerCase()).includes("playstation")||e.includes("xbox")||e.includes("nintendo")?"Gaming Console":e.includes("smart-tv")||e.includes("smarttv")||e.includes("webos")||e.includes("tizen")||e.includes("roku")||e.includes("appletv")||e.includes("googletv")||e.includes("android tv")?"Smart TV":e.includes("watch")||e.includes("wearable")||e.includes("fitbit")||e.includes("gear s")?"Wearable":e.includes("ipad")||e.includes("android")&&(e.includes("tablet")||!e.includes("mobile")||e.includes("nexus 7")||e.includes("nexus 9")||e.includes("nexus 10"))||e.includes("windows")&&e.includes("touch")&&!e.includes("phone")||e.includes("kindle")&&!e.includes("mobile")?"Tablet":e.includes("mobile")||e.includes("iphone")||e.includes("ipod")||e.includes("blackberry")||e.includes("windows phone")||e.includes("palm")||e.includes("symbian")||e.includes("nokia")||e.includes("fennec")||e.includes("opera mini")||e.includes("opera mobi")||e.includes("android")&&e.includes("mobile")?"Mobile":e.includes("windows")||e.includes("macintosh")||e.includes("mac os x")||e.includes("linux")||e.includes("ubuntu")||e.includes("debian")||e.includes("fedora")||e.includes("centos")||e.includes("freebsd")||e.includes("openbsd")?"Desktop":e.includes("bot")||e.includes("crawler")||e.includes("spider")||e.includes("scraper")||e.includes("curl")||e.includes("wget")?"Bot":"Unknown":"Unknown";return{os:i.os,osVersion:i.version,browser:t.browser,browserVersion:t.version,deviceType:e}}function t(){return navigator.connection&&"string"==typeof navigator.connection.effectiveType?navigator.connection.effectiveType:null}function m(e){e=e.target.closest("button[data-event]");if(e){var{os:n,browser:i}=v(navigator.userAgent);let o={event:e.getAttribute("data-event"),userId:e.getAttribute("data-user-id")||null,channel:e.getAttribute("data-channel")||"events",icon:e.getAttribute("data-icon")||null,data:{url:window.location.href,referrer:document.referrer,utm:{source:new URLSearchParams(window.location.search).get("utm_source")||null,medium:new URLSearchParams(window.location.search).get("utm_medium")||null,campaign:new URLSearchParams(window.location.search).get("utm_campaign")||null,term:new URLSearchParams(window.location.search).get("utm_term")||null},userAgent:navigator.userAgent,platform:navigator.userAgentData&&navigator.userAgentData.platform||null,appVersion:navigator.appVersion,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,networkConnectionType:t()},tags:[],context:{sdkVersion:a,sdkRuntime:"browser",operatingSystem:n,browser:i}};[...e.attributes].forEach(e=>{var n;e.name.startsWith("data-tag-")&&(n=e.name.replace("data-tag-",""),o.tags.push(n+":"+e.value))}),[...e.attributes].forEach(e=>{var n;e.name.startsWith("data-payload-")&&(n=e.name.replace("data-payload-",""),o.data[n]=e.value)}),window.evntaly("track",o)}}function g(){var e,n;r.trackingEnabled&&({os:n,browser:e}=v(navigator.userAgent),n={event:"Page Viewed",userId:null,topic:"@navigation",data:{url:window.location.href,referrer:document.referrer,utm:{source:new URLSearchParams(window.location.search).get("utm_source")||null,medium:new URLSearchParams(window.location.search).get("utm_medium")||null,campaign:new URLSearchParams(window.location.search).get("utm_campaign")||null,term:new URLSearchParams(window.location.search).get("utm_term")||null},userAgent:navigator.userAgent,platform:navigator.userAgentData&&navigator.userAgentData.platform||null,appVersion:navigator.appVersion,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,networkConnectionType:t()},type:"Page View",icon:"🔥",context:{sdkVersion:a,sdkRuntime:"browser",operatingSystem:n,browser:e}},window.evntaly("track",n))}"complete"===document.readyState||"interactive"===document.readyState?c=!0:window.addEventListener("load",function(){c=!0}),setInterval(function(){for(;0<s.length;){var[e,...n]=s.shift();if("init"===e&&([o,i,t={}]=[...n],r.token=o,r.project=i,r.disableAutoPageViewTracking=!!t.disableAutoPageViewTracking,!l)){if(document.addEventListener("click",m),!r.disableAutoPageViewTracking){if(window.history.pushState){let n=window.history.pushState;window.history.pushState=function(...e){n.apply(this,e),r.disableAutoPageViewTracking||g()}}window.addEventListener("popstate",function(){r.disableAutoPageViewTracking||g()}),window.addEventListener("load",function(){r.disableAutoPageViewTracking||g()}),c&&(console.log("Initial page view triggered manually"),setTimeout(g,0))}l=!0}"track"===e&&(async e=>{var n;r.trackingEnabled?r.token?(n=await(async()=>{var{os:e,osVersion:n,browser:o,browserVersion:i,deviceType:t}=v(navigator.userAgent),s=await(async()=>u||(w=w||(async()=>{try{var e,n=await fetch("https://ipapi.co/json/",{method:"GET",headers:{Accept:"application/json"}});if(n.ok)return e=await n.json(),u={country:e.country_name||null,countryCode:e.country_code||null,region:e.region||null,city:e.city||null,timezone:e.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone||null,latitude:e.latitude||null,longitude:e.longitude||null};throw new Error("Failed to fetch location data")}catch(e){return console.warn("Evntaly: Failed to fetch location data:",e.message),u={country:null,countryCode:null,region:null,city:null,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||null,latitude:null,longitude:null}}})()))();return{userAgent:navigator.userAgent||null,referer:document.referrer||null,method:"GET",url:""+window.location.pathname+window.location.search+window.location.hash||null,host:window.location.host||null,origin:window.location.origin||null,acceptLanguage:navigator.language||null,acceptEncoding:null,contentType:"text/html",xForwardedProto:window.location.protocol?.replace(":","")||null,xForwardedHost:null,xRequestedWith:"XMLHttpRequest",authorization:null,cfIpCountry:null,cfRay:null,os:e,osVersion:n,browser:o,browserVersion:i,deviceType:t,location:s}})(),fetch(d+"/register/event",{method:"POST",headers:{"Content-Type":"application/json",secret:r.token,pat:r.project},body:JSON.stringify({title:e.event,description:"User interaction",message:"Automatically tracked event.",data:e.data||{},user:{id:e.userId||"anonymous"},icon:e.icon||"ℹ️",apply_rule_only:!0,notify:!0,type:e.type||"Event",sessionID:e.sessionID||null,feature:e.channel||"events",topic:e.topic||"@auto-generated event",tags:e.tags||[],context:{sdkVersion:a,sdkRuntime:"browser",sdkSource:"evntaly-web"},requestContext:n})})):console.error("Evntaly: Missing API token. Call window.evntaly('Init', 'TOKEN', 'PROJECT_NAME') first."):console.warn("🚫 Tracking is disabled. Event not sent.")})(...n),"identifyUser"===e&&(o=[...n][0],r.token?fetch(d+"/register/user",{method:"POST",headers:{"Content-Type":"application/json",secret:r.token,pat:r.project},body:JSON.stringify(o)}):console.error("Evntaly: Missing API token. Call window.evntaly('setConfig', 'TOKEN', 'PROJECT_NAME') first.")),"disableTracking"===e&&(r.trackingEnabled=!1,console.log("🚫 Event tracking disabled.")),"enableTracking"===e&&(r.trackingEnabled=!0,console.log("✅ Event tracking enabled."))}var o,i,t},100)})();