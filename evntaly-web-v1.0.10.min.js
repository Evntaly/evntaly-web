(()=>{let r=window.evsq=window.evsq||[],i=(window.evntaly=window.evntaly||function(...e){r.push(e)},{token:null,project:null,trackingEnabled:!0}),s="1.0.10",c="https://app.evntaly.com/prod/api/v1",l=!1,d=!1;function g(e){let t="Unknown OS",n="Unknown Browser";var a=e.match(/Windows NT ([\d.]+)/),o=e.match(/Mac OS X ([\d_]+)/),r=e.match(/Android ([\d.]+)/),i=e.match(/iPhone OS ([\d_]+)/),s=e.match(/Linux/);return a?t="Windows NT "+a[1]:o?t="Mac OS X "+o[1]:r?t="Android "+r[1]:i?t="iOS "+i[1]:s&&(t="Linux"),/Chrome\/([0-9.]+)/.test(e)?n="Chrome "+e.match(/Chrome\/([0-9.]+)/)[1]:/Firefox\/([0-9.]+)/.test(e)?n="Firefox "+e.match(/Firefox\/([0-9.]+)/)[1]:/Safari\/([0-9.]+)/.test(e)&&!/Chrome/.test(e)?(a=e.match(/Version\/([0-9.]+)/),n="Safari "+(a?a[1]:"Unknown")):/Edg\/([0-9.]+)/.test(e)&&(n="Edge "+e.match(/Edg\/([0-9.]+)/)[1]),{os:t,browser:n}}function o(){return navigator.connection&&"string"==typeof navigator.connection.effectiveType?navigator.connection.effectiveType:null}function u(e){e=e.target.closest("button[data-event]");if(e){var{os:t,browser:a}=g(navigator.userAgent);let n={event:e.getAttribute("data-event"),userId:e.getAttribute("data-user-id")||null,channel:e.getAttribute("data-channel")||"events",icon:e.getAttribute("data-icon")||null,data:{url:window.location.href,referrer:document.referrer,utm:{source:new URLSearchParams(window.location.search).get("utm_source")||null,medium:new URLSearchParams(window.location.search).get("utm_medium")||null,campaign:new URLSearchParams(window.location.search).get("utm_campaign")||null,term:new URLSearchParams(window.location.search).get("utm_term")||null},userAgent:navigator.userAgent,platform:navigator.userAgentData&&navigator.userAgentData.platform||null,appVersion:navigator.appVersion,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,networkConnectionType:o()},tags:[],context:{sdkVersion:s,sdkRuntime:"browser",operatingSystem:t,browser:a}};[...e.attributes].forEach(e=>{var t;e.name.startsWith("data-tag-")&&(t=e.name.replace("data-tag-",""),n.tags.push(t+":"+e.value))}),[...e.attributes].forEach(e=>{var t;e.name.startsWith("data-payload-")&&(t=e.name.replace("data-payload-",""),n.data[t]=e.value)}),window.evntaly("track",n)}}function w(){var e,t;i.trackingEnabled&&({os:t,browser:e}=g(navigator.userAgent),t={event:"Page Viewed",userId:null,topic:"@navigation",data:{url:window.location.href,referrer:document.referrer,utm:{source:new URLSearchParams(window.location.search).get("utm_source")||null,medium:new URLSearchParams(window.location.search).get("utm_medium")||null,campaign:new URLSearchParams(window.location.search).get("utm_campaign")||null,term:new URLSearchParams(window.location.search).get("utm_term")||null},userAgent:navigator.userAgent,platform:navigator.userAgentData&&navigator.userAgentData.platform||null,appVersion:navigator.appVersion,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,networkConnectionType:o()},type:"pageview",icon:"ðŸ”¥",context:{sdkVersion:s,sdkRuntime:"browser",operatingSystem:t,browser:e}},window.evntaly("track",t))}"complete"===document.readyState||"interactive"===document.readyState?d=!0:window.addEventListener("load",function(){d=!0}),setInterval(function(){for(;0<r.length;){var[e,...t]=r.shift();if("init"===e&&([n,a,o={}]=[...t],i.token=n,i.project=a,i.disableAutoPageViewTracking=o.disableAutoPageViewTracking,console.log(i),console.log(i.disableAutoPageViewTracking),!l)){if(document.addEventListener("click",u),!i.disableAutoPageViewTracking){if(window.history.pushState){let t=window.history.pushState;window.history.pushState=function(...e){t.apply(this,e),i.disableAutoPageViewTracking||w()}}window.addEventListener("popstate",function(){i.disableAutoPageViewTracking||w()}),window.addEventListener("load",function(){i.disableAutoPageViewTracking||w()}),d&&(console.log("Initial page view triggered manually"),setTimeout(w,0))}l=!0}"track"===e&&(n=[...t][0],o=a=void 0,i.trackingEnabled?i.token?({os:a,browser:o}=g(navigator.userAgent),fetch(c+"/register/event",{method:"POST",headers:{"Content-Type":"application/json",secret:i.token,pat:i.project},body:JSON.stringify({title:n.event,description:"User interaction",message:"Automatically tracked event.",data:n.data||{},user:{id:n.userId||"anonymous"},icon:n.icon||"â„¹ï¸",apply_rule_only:!0,notify:!0,type:"",sessionID:n.sessionID||null,feature:n.channel||"events",topic:n.topic||"@auto-generated event",tags:n.tags||[],context:{sdkVersion:s,sdkRuntime:"browser",operatingSystem:a,browser:o}})})):console.error("Evntaly: Missing API token. Call window.evntaly('Init', 'TOKEN', 'PROJECT_NAME') first."):console.warn("ðŸš« Tracking is disabled. Event not sent.")),"identifyUser"===e&&(t=[...t][0],i.token?fetch(c+"/register/user",{method:"POST",headers:{"Content-Type":"application/json",secret:i.token,pat:i.project},body:JSON.stringify(t)}):console.error("Evntaly: Missing API token. Call window.evntaly('setConfig', 'TOKEN', 'PROJECT_NAME') first.")),"disableTracking"===e&&(i.trackingEnabled=!1,console.log("ðŸš« Event tracking disabled.")),"enableTracking"===e&&(i.trackingEnabled=!0,console.log("âœ… Event tracking enabled."))}var n,a,o},100)})();